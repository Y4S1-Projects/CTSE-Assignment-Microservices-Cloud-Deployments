spring.application.name=api-gateway
server.port=8080

# Set application type to Reactive/WebFlux
spring.main.web-application-type=reactive

# Disable ALL reactive loadbalancer components (causing ClassNotFoundException)
spring.cloud.loadbalancer.enabled=false

# Disable incompatible Spring Cloud auto-configurations
spring.autoconfigure.exclude=org.springframework.cloud.autoconfigure.LifecycleMvcEndpointAutoConfiguration,org.springframework.cloud.autoconfigure.RefreshAutoConfiguration,org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration,org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration,org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration,org.springframework.cloud.client.loadbalancer.reactive.ReactorLoadBalancerClientAutoConfiguration

# Server Configuration
server.shutdown=graceful

# Actuator Configuration (Health checks)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true

# OpenAPI / Swagger Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.urls[0].name=Gateway
springdoc.swagger-ui.urls[0].url=/v3/api-docs
springdoc.swagger-ui.urls[1].name=Auth Service
springdoc.swagger-ui.urls[1].url=/auth/v3/api-docs
springdoc.swagger-ui.urls[2].name=Catalog Service
springdoc.swagger-ui.urls[2].url=/catalog/v3/api-docs
springdoc.swagger-ui.urls[3].name=Order Service
springdoc.swagger-ui.urls[3].url=/orders/v3/api-docs
springdoc.swagger-ui.urls[4].name=Payment Service
springdoc.swagger-ui.urls[4].url=/payments/v3/api-docs
springdoc.swagger-ui.urls-primary-name=Gateway

# Logging
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Security Configuration
app.jwt.secret=${JWT_SECRET:your-super-secret-key-change-in-production-env}
app.jwt.expiration=86400000

# Gateway Routes
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=http://auth-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/**

spring.cloud.gateway.routes[1].id=catalog-service
spring.cloud.gateway.routes[1].uri=http://catalog-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/catalog/**

spring.cloud.gateway.routes[2].id=order-service
spring.cloud.gateway.routes[2].uri=http://order-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/orders/**

spring.cloud.gateway.routes[3].id=payment-service
spring.cloud.gateway.routes[3].uri=http://payment-service:8084
spring.cloud.gateway.routes[3].predicates[0]=Path=/payments/**,/notifications/**

# Service URLs for inter-service communication
service.auth.url=http://auth-service:8081
service.catalog.url=http://catalog-service:8082
service.order.url=http://order-service:8083
service.payment.url=http://payment-service:8084